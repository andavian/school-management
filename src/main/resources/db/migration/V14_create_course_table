CREATE TABLE courses (
    course_id           BINARY(16) PRIMARY KEY,
    subject_id          BINARY(16) NOT NULL,
    grade_level_id      BINARY(16) NOT NULL,
    teacher_id          BINARY(16) NOT NULL,
    academic_year_id    BINARY(16) NOT NULL,

    schedule_info       TEXT,  -- JSON con horarios
    classroom           VARCHAR(50),
    max_students        INT DEFAULT 35,

    status              VARCHAR(20) NOT NULL DEFAULT 'ACTIVE',
    created_at          TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (subject_id) REFERENCES subjects(subject_id) ON DELETE RESTRICT,
    FOREIGN KEY (grade_level_id) REFERENCES grade_levels(grade_level_id) ON DELETE RESTRICT,
    FOREIGN KEY (teacher_id) REFERENCES teachers(teacher_id) ON DELETE RESTRICT,
    FOREIGN KEY (academic_year_id) REFERENCES academic_years(academic_year_id) ON DELETE RESTRICT,

    UNIQUE KEY unique_course_assignment (subject_id, grade_level_id, academic_year_id),
    INDEX idx_subject (subject_id),
    INDEX idx_grade_level (grade_level_id),
    INDEX idx_teacher (teacher_id),
    INDEX idx_academic_year (academic_year_id)
);
