CREATE TABLE grades (
    grade_id            BINARY(16) PRIMARY KEY,
    enrollment_id       BINARY(16) NOT NULL,
    course_id           BINARY(16) NOT NULL,

    -- Calificaciones por trimestre/cuatrimestre
    period_1_grade      DECIMAL(5,2),
    period_2_grade      DECIMAL(5,2),
    period_3_grade      DECIMAL(5,2),
    final_grade         DECIMAL(5,2),

    -- Estado
    status              VARCHAR(20) NOT NULL DEFAULT 'IN_PROGRESS',  -- IN_PROGRESS, PASSED, FAILED

    -- Observaciones del docente
    observations        TEXT,

    created_at          TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at          TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (enrollment_id) REFERENCES enrollments(enrollment_id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES courses(course_id) ON DELETE RESTRICT,

    UNIQUE KEY unique_enrollment_course (enrollment_id, course_id),
    INDEX idx_enrollment (enrollment_id),
    INDEX idx_course (course_id),
    INDEX idx_status (status)
);